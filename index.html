<!DOCTYPE html>
<html>
    <head>
        <title>Ro Sham Beaux</title>
    </head>
    <body>  
    </body>

 <!--JavaScript begins-->
    <script>
        const choices = ['rock', 'paper', 'scissors']
        let score = {player: 0, cpu: 0 , rounds: 1};    

/// Part 3. -- Computer Selection        
            function computerPlay() {
            let getRandom = Math.floor(Math.random() * choices.length)
            return choices[getRandom]
        }

/// Part 4. -- Single Round
   
    /// A Single Round is Played
        function playRound(playerSelection, computerSelection) {
            playerSelection = prompt("Please enter 'rock', 'paper', or 'scissors': ").toLowerCase();
                if (playerSelection !== 'rock' && playerSelection !== 'scissors' && playerSelection !== 'paper')
                { return playRound();
                } else if (playerSelection === undefined || playerSelection === null) 
                { return playRound();
            }
            computerSelection = computerPlay();
                console.log(`You selected: "${playerSelection}"`);
                console.log(`Computer selected: "${computerSelection}"`);
                
            ///Functions defining what happens at each outcome
                        function youTie() {
                            score.rounds += 1;
                            console.log("Tie! Double " + playerSelection + "s! Go again!");
                            return game();
                        }

                        function youWin() {
                            score.player += 1;
                            score.rounds += 1;
                            console.log("You win! " + playerSelection + " beats " + computerSelection + "!")
                            return game();
                        }

                        function youLose() {
                            score.cpu += 1;
                            score.rounds += 1;
                            console.log("You lose! " + computerSelection + " beats " + playerSelection + "!")
                            return game();
                        }

        ///The condintionals determining playRound() outcomes
            if (playerSelection === computerSelection) {
                youTie();
            } else if (playerSelection === 'rock') {
                    if (computerSelection === 'scissors') {
                        youWin();
                 } else {
                        youLose();
                    }
            } else if (playerSelection === 'paper') {
                    if (computerSelection === 'rock') {
                        youWin();
                    } else {
                        youLose();
                    }
            } else if (playerSelection === 'scissors') {
                    if (computerSelection === 'paper') {
                        youWin();
                    } else {
                        youLose();
                    }
            }
        }

 /// Part 5: The shell of the game itself    
    function game() {
        console.log("Round: " + score.rounds + " Human: " + score.player + "; Machine: " + score.cpu)
        if (score.player === 5 || score.cpu === 5) {
            endGame();
         } else {
             playRound();
         }
    }
 
         /// reset, again endGame functions
                function reset() {
                        score.player = 0;
                        score.cpu = 0;
                        score.rounds = 0;
                }
                
                function again(playAgain) {
                        playAgain = prompt("Play again?").toLowerCase();
                        if (playAgain === "y" || "yes") {
                            reset();
                            game();
                        } else if (playAgain === "n" || "no") {
                            goodbye();
                        } else {
                            again();
                        }
                }
                
            function endGame() {
                if (score.player === 5) {
                    console.log("YOU WIN!!! Your kind shall be suffered to survive, for now...")
                } else {
                    console.log("LOSER! Truely the machines shall inherit the earth, mortal fool!")
                } 
                again();
            }    

            function goodbye() {
                console.log("Goodbye!");
            }

    </script>
</html>